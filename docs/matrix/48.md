# [48. Rotate Image](https://leetcode.com/problems/rotate-image/description/?envType=study-plan-v2&envId=top-interview-150)

You are given an <code>n x n</code> 2D <code>matrix</code> representing an image, rotate the image by **90**  degrees (clockwise).

You have to rotate the image <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank">**in-place** </a>, which means you have to modify the input 2D matrix directly. **DO NOT**  allocate another 2D matrix and do the rotation.

**Example 1:** 
<img alt="" src="https://assets.leetcode.com/uploads/2020/08/28/mat1.jpg" style="width: 500px; height: 188px;">

```
Input: matrix = [[1,2,3],[4,5,6],[7,8,9]]
Output: [[7,4,1],[8,5,2],[9,6,3]]
```

**Example 2:** 
<img alt="" src="https://assets.leetcode.com/uploads/2020/08/28/mat2.jpg" style="width: 500px; height: 201px;">

```
Input: matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]
Output: [[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]
```

**Constraints:** 

- <code>n == matrix.length == matrix[i].length</code>
- <code>1 <= n <= 20</code>
- <code>-1000 <= matrix[i][j] <= 1000</code>

## Approach

### Method 1: Transpose + Reverse (Recommended)

1. **Transpose the matrix**  
   - Flip the matrix along its main diagonal.  
   - Swap `matrix[i][j]` with `matrix[j][i]` for `i < j`.

2. **Reverse each row**  
   - After transposing, reverse each row to complete the 90-degree rotation.

**Why it works:**  
- Transpose converts rows into columns.  
- Reversing each row rotates columns into the correct clockwise order.

## Code

::: code-group

```kotlin [Kotlin]
class Solution {
    fun rotate(matrix: Array<IntArray>): Unit {
        val n = matrix.size

        // 1. Transpose the matrix
        for (i in 0 until n) {
            for (j in i + 1 until n) {
                val temp = matrix[i][j]
                matrix[i][j] = matrix[j][i]
                matrix[j][i] = temp
            }
        }

        // 2. Reverse each row
        for (i in 0 until n) {
            var l = 0
            var r = n - 1
            while (l < r) {
                val temp = matrix[i][l]
                matrix[i][l] = matrix[i][r]
                matrix[i][r] = temp
                l++
                r--
            }
        }
    }
}
```

```typescript [TypeScript]
function rotate(matrix: number[][]): void {
    const n = matrix.length;

    // 1. Transpose the matrix
    for (let i = 0; i < n; i++) {
        for (let j = i + 1; j < n; j++) {
            const temp = matrix[i][j];
            matrix[i][j] = matrix[j][i];
            matrix[j][i] = temp;
        }
    }

    // 2. Reverse each row
    for (let i = 0; i < n; i++) {
        let l = 0;
        let r = n - 1;
        while (l < r) {
            const temp = matrix[i][l];
            matrix[i][l] = matrix[i][r];
            matrix[i][r] = temp;
            l++;
            r--;
        }
    }
}
```

```java [Java]
class Solution {
    public void rotate(int[][] matrix) {
        int n = matrix.length;

        // 1. Transpose the matrix
        for (int i = 0; i < n; i++) {
            for (int j = i + 1; j < n; j++) {
                int temp = matrix[i][j];
                matrix[i][j] = matrix[j][i];
                matrix[j][i] = temp;
            }
        }

        // 2. Reverse each row
        for (int i = 0; i < n; i++) {
            int l = 0, r = n - 1;
            while (l < r) {
                int temp = matrix[i][l];
                matrix[i][l] = matrix[i][r];
                matrix[i][r] = temp;
                l++;
                r--;
            }
        }
    }
}
```

```python [Python]
class Solution:
    def rotate(self, matrix: List[List[int]]) -> None:
        n = len(matrix)

        # 1. Transpose the matrix
        for i in range(n):
            for j in range(i + 1, n):
                matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]

        # 2. Reverse each row
        for i in range(n):
            l, r = 0, n - 1
            while l < r:
                matrix[i][l], matrix[i][r] = matrix[i][r], matrix[i][l]
                l += 1
                r -= 1
```

:::

**Complexity:**  
- **Time:** O(n²) — every element is moved once  
- **Space:** O(1) — in-place rotation
